{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///home/adyllsxn/Workspace/Developer/comj-frontend/src/hooks/usePassword.ts"],"sourcesContent":["// hooks/usePassword.ts\n'use client';\n\nimport { useState, useCallback } from 'react'; // ✅ Adicionar useCallback\nimport api from '@/lib/api';\n\ninterface ChangePasswordData {\n  id: string;\n  currentPassword: string;\n  newPassword: string;\n  confirmNewPassword: string;\n}\n\ninterface ChangePasswordResponse {\n  code: number;\n  message: string;\n}\n\nexport const usePassword = () => {\n  const [isLoading, setIsLoading] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n  const [success, setSuccess] = useState(false);\n\n  // ✅ Usar useCallback para evitar recriação da função\n  const resetState = useCallback(() => {\n    setError(null);\n    setSuccess(false);\n  }, []); // ✅ Dependências vazias - função não recria\n\n  const changePassword = async (data: ChangePasswordData): Promise<boolean> => {\n    setIsLoading(true);\n    setError(null);\n    setSuccess(false);\n\n    try {\n      // Validação básica\n      if (data.newPassword !== data.confirmNewPassword) {\n        setError('As senhas não coincidem');\n        setIsLoading(false);\n        return false;\n      }\n\n      if (data.newPassword.length < 6) {\n        setError('A nova senha deve ter pelo menos 6 caracteres');\n        setIsLoading(false);\n        return false;\n      }\n\n      const response = await api.post<ChangePasswordResponse>('/v1/Password/Change', data);\n      \n      if (response.data.code === 200) {\n        setSuccess(true);\n        return true;\n      } else {\n        setError(response.data.message || 'Erro ao alterar senha');\n        return false;\n      }\n    } catch (error: any) {\n      // Tratamento silencioso de erros\n      if (error.response?.data?.message) {\n        setError(error.response.data.message);\n      } else if (error.type === 'NETWORK_ERROR') {\n        setError('Erro de conexão. Tente novamente.');\n      } else {\n        setError('Erro ao alterar senha. Tente novamente.');\n      }\n      return false;\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  return {\n    changePassword,\n    isLoading,\n    error,\n    success,\n    resetState, // ✅ Agora está memoizado\n  };\n};"],"names":[],"mappings":"AAAA,uBAAuB;;;;;AAGvB,mRAA+C,0BAA0B;AACzE;;AAHA;;;AAiBO,MAAM,cAAc;;IACzB,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,yKAAQ,EAAC;IAC3C,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,yKAAQ,EAAgB;IAClD,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,yKAAQ,EAAC;IAEvC,qDAAqD;IACrD,MAAM,aAAa,IAAA,4KAAW;+CAAC;YAC7B,SAAS;YACT,WAAW;QACb;8CAAG,EAAE,GAAG,4CAA4C;IAEpD,MAAM,iBAAiB,OAAO;QAC5B,aAAa;QACb,SAAS;QACT,WAAW;QAEX,IAAI;YACF,mBAAmB;YACnB,IAAI,KAAK,WAAW,KAAK,KAAK,kBAAkB,EAAE;gBAChD,SAAS;gBACT,aAAa;gBACb,OAAO;YACT;YAEA,IAAI,KAAK,WAAW,CAAC,MAAM,GAAG,GAAG;gBAC/B,SAAS;gBACT,aAAa;gBACb,OAAO;YACT;YAEA,MAAM,WAAW,MAAM,+HAAG,CAAC,IAAI,CAAyB,uBAAuB;YAE/E,IAAI,SAAS,IAAI,CAAC,IAAI,KAAK,KAAK;gBAC9B,WAAW;gBACX,OAAO;YACT,OAAO;gBACL,SAAS,SAAS,IAAI,CAAC,OAAO,IAAI;gBAClC,OAAO;YACT;QACF,EAAE,OAAO,OAAY;gBAEf,sBAAA;YADJ,iCAAiC;YACjC,KAAI,kBAAA,MAAM,QAAQ,cAAd,uCAAA,uBAAA,gBAAgB,IAAI,cAApB,2CAAA,qBAAsB,OAAO,EAAE;gBACjC,SAAS,MAAM,QAAQ,CAAC,IAAI,CAAC,OAAO;YACtC,OAAO,IAAI,MAAM,IAAI,KAAK,iBAAiB;gBACzC,SAAS;YACX,OAAO;gBACL,SAAS;YACX;YACA,OAAO;QACT,SAAU;YACR,aAAa;QACf;IACF;IAEA,OAAO;QACL;QACA;QACA;QACA;QACA;IACF;AACF;GA7Da","debugId":null}},
    {"offset": {"line": 82, "column": 0}, "map": {"version":3,"sources":["file:///home/adyllsxn/Workspace/Developer/comj-frontend/src/components/modals/ChangePasswordModal.tsx"],"sourcesContent":["// components/modals/ChangePasswordModal.tsx\n'use client';\n\nimport { useState, useEffect } from 'react';\nimport { FaTimes, FaEye, FaEyeSlash, FaKey, FaCheck } from 'react-icons/fa';\nimport { usePassword } from '@/hooks/usePassword';\n\ninterface ChangePasswordModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  userId: string;\n}\n\nexport default function ChangePasswordModal({ isOpen, onClose, userId }: ChangePasswordModalProps) {\n  const [formData, setFormData] = useState({\n    currentPassword: '',\n    newPassword: '',\n    confirmNewPassword: ''\n  });\n  const [showCurrentPassword, setShowCurrentPassword] = useState(false);\n  const [showNewPassword, setShowNewPassword] = useState(false);\n  const [showConfirmPassword, setShowConfirmPassword] = useState(false);\n  \n  const { changePassword, isLoading, error, success, resetState } = usePassword();\n\n  // ✅ CORRIGIDO: Reset form quando modal abrir\n  useEffect(() => {\n    if (isOpen) {\n      resetState();\n      setFormData({\n        currentPassword: '',\n        newPassword: '',\n        confirmNewPassword: ''\n      });\n      setShowCurrentPassword(false);\n      setShowNewPassword(false);\n      setShowConfirmPassword(false);\n    }\n  }, [isOpen, resetState]); // ✅ resetState agora é estável\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    \n    const success = await changePassword({\n      id: userId,\n      currentPassword: formData.currentPassword,\n      newPassword: formData.newPassword,\n      confirmNewPassword: formData.confirmNewPassword\n    });\n\n    if (success) {\n      // Fechar modal após 2 segundos de sucesso\n      setTimeout(() => {\n        onClose();\n      }, 2000);\n    }\n  };\n\n  const handleChange = (field: string, value: string) => {\n    setFormData(prev => ({ ...prev, [field]: value }));\n  };\n\n  // Fechar modal ao pressionar ESC\n  useEffect(() => {\n    const handleEsc = (e: KeyboardEvent) => {\n      if (e.key === 'Escape') onClose();\n    };\n\n    if (isOpen) {\n      document.addEventListener('keydown', handleEsc);\n      document.body.style.overflow = 'hidden';\n    }\n\n    return () => {\n      document.removeEventListener('keydown', handleEsc);\n      document.body.style.overflow = 'unset';\n    };\n  }, [isOpen, onClose]);\n\n  if (!isOpen) return null;\n\n  return (\n    <div className=\"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black bg-opacity-50 backdrop-blur-sm\">\n      <div \n        className=\"bg-white dark:bg-gray-800 rounded-2xl shadow-2xl w-full max-w-md transform transition-all duration-300 scale-100 opacity-100\"\n        onClick={(e) => e.stopPropagation()}\n      >\n        {/* Header */}\n        <div className=\"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700\">\n          <div className=\"flex items-center space-x-3\">\n            <div className=\"p-2 bg-orange-100 dark:bg-orange-900 rounded-lg\">\n              <FaKey className=\"w-5 h-5 text-orange-600 dark:text-orange-400\" />\n            </div>\n            <div>\n              <h2 className=\"text-xl font-bold text-gray-900 dark:text-white\">\n                Alterar Senha\n              </h2>\n              <p className=\"text-sm text-gray-600 dark:text-gray-400\">\n                Digite sua senha atual e a nova senha\n              </p>\n            </div>\n          </div>\n          \n          <button\n            onClick={onClose}\n            className=\"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors\"\n            disabled={isLoading}\n          >\n            <FaTimes className=\"w-5 h-5 text-gray-500 dark:text-gray-400\" />\n          </button>\n        </div>\n\n        {/* Form */}\n        <form onSubmit={handleSubmit} className=\"p-6 space-y-4\">\n          {/* Mensagem de Sucesso */}\n          {success && (\n            <div className=\"p-4 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg flex items-center space-x-3\">\n              <FaCheck className=\"w-5 h-5 text-green-600 dark:text-green-400 flex-shrink-0\" />\n              <div>\n                <p className=\"text-green-800 dark:text-green-300 font-medium\">\n                  Senha alterada com sucesso!\n                </p>\n                <p className=\"text-green-700 dark:text-green-400 text-sm\">\n                  Redirecionando...\n                </p>\n              </div>\n            </div>\n          )}\n\n          {/* Mensagem de Erro */}\n          {error && !success && (\n            <div className=\"p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg\">\n              <p className=\"text-red-800 dark:text-red-300 text-sm\">\n                {error}\n              </p>\n            </div>\n          )}\n\n          {/* Senha Atual */}\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n              Senha Atual *\n            </label>\n            <div className=\"relative\">\n              <input\n                type={showCurrentPassword ? \"text\" : \"password\"}\n                required\n                value={formData.currentPassword}\n                onChange={(e) => handleChange('currentPassword', e.target.value)}\n                className=\"w-full px-4 py-3 pr-10 border-2 border-gray-200 dark:border-gray-600 rounded-xl bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 focus:outline-none focus:border-orange-500 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed\"\n                placeholder=\"Digite sua senha atual\"\n                disabled={isLoading || success}\n              />\n              <button\n                type=\"button\"\n                onClick={() => setShowCurrentPassword(!showCurrentPassword)}\n                className=\"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors disabled:opacity-50\"\n                disabled={isLoading || success}\n              >\n                {showCurrentPassword ? <FaEyeSlash className=\"w-4 h-4\" /> : <FaEye className=\"w-4 h-4\" />}\n              </button>\n            </div>\n          </div>\n\n          {/* Nova Senha */}\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n              Nova Senha *\n            </label>\n            <div className=\"relative\">\n              <input\n                type={showNewPassword ? \"text\" : \"password\"}\n                required\n                value={formData.newPassword}\n                onChange={(e) => handleChange('newPassword', e.target.value)}\n                className=\"w-full px-4 py-3 pr-10 border-2 border-gray-200 dark:border-gray-600 rounded-xl bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 focus:outline-none focus:border-orange-500 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed\"\n                placeholder=\"Digite a nova senha\"\n                disabled={isLoading || success}\n              />\n              <button\n                type=\"button\"\n                onClick={() => setShowNewPassword(!showNewPassword)}\n                className=\"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors disabled:opacity-50\"\n                disabled={isLoading || success}\n              >\n                {showNewPassword ? <FaEyeSlash className=\"w-4 h-4\" /> : <FaEye className=\"w-4 h-4\" />}\n              </button>\n            </div>\n            <p className=\"text-xs text-gray-500 dark:text-gray-400 mt-1\">\n              Mínimo 6 caracteres\n            </p>\n          </div>\n\n          {/* Confirmar Nova Senha */}\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n              Confirmar Nova Senha *\n            </label>\n            <div className=\"relative\">\n              <input\n                type={showConfirmPassword ? \"text\" : \"password\"}\n                required\n                value={formData.confirmNewPassword}\n                onChange={(e) => handleChange('confirmNewPassword', e.target.value)}\n                className=\"w-full px-4 py-3 pr-10 border-2 border-gray-200 dark:border-gray-600 rounded-xl bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 focus:outline-none focus:border-orange-500 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed\"\n                placeholder=\"Confirme a nova senha\"\n                disabled={isLoading || success}\n              />\n              <button\n                type=\"button\"\n                onClick={() => setShowConfirmPassword(!showConfirmPassword)}\n                className=\"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors disabled:opacity-50\"\n                disabled={isLoading || success}\n              >\n                {showConfirmPassword ? <FaEyeSlash className=\"w-4 h-4\" /> : <FaEye className=\"w-4 h-4\" />}\n              </button>\n            </div>\n          </div>\n\n          {/* Botões */}\n          <div className=\"flex space-x-3 pt-4\">\n            <button\n              type=\"button\"\n              onClick={onClose}\n              disabled={isLoading}\n              className=\"flex-1 px-4 py-3 border-2 border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-xl font-medium hover:bg-gray-50 dark:hover:bg-gray-700 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed\"\n            >\n              Cancelar\n            </button>\n            \n            <button\n              type=\"submit\"\n              disabled={isLoading || success}\n              className=\"flex-1 px-4 py-3 bg-gradient-to-r from-orange-500 to-red-600 text-white rounded-xl font-medium hover:from-orange-600 hover:to-red-700 transition-all duration-200 disabled:opacity-70 disabled:cursor-not-allowed flex items-center justify-center space-x-2\"\n            >\n              {isLoading ? (\n                <>\n                  <div className=\"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin\" />\n                  <span>Alterando...</span>\n                </>\n              ) : success ? (\n                <>\n                  <FaCheck className=\"w-4 h-4\" />\n                  <span>Sucesso!</span>\n                </>\n              ) : (\n                <span>Alterar Senha</span>\n              )}\n            </button>\n          </div>\n        </form>\n      </div>\n    </div>\n  );\n}"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 604, "column": 0}, "map": {"version":3,"sources":["file:///home/adyllsxn/Workspace/Developer/comj-frontend/src/app/%28containers%29/perfil/page.tsx"],"sourcesContent":["// app/(containers)/perfil/page.tsx\n'use client';\n\nimport { useAuth } from \"@/hooks/useAuth\";\nimport { useRouter } from \"next/navigation\";\nimport { FaUser, FaEnvelope, FaAddressCard, FaEdit, FaKey, FaTrash } from \"react-icons/fa\";\nimport { getApiUrl } from \"@/lib/config\";\nimport { useEffect, useState } from \"react\";\nimport ChangePasswordModal from \"@/components/modals/ChangePasswordModal\";\n\nexport default function PerfilPage() {\n  const { user, isLoading, isAuthenticated } = useAuth();\n  const router = useRouter();\n  const [imageError, setImageError] = useState(false);\n  const [isChangePasswordModalOpen, setIsChangePasswordModalOpen] = useState(false);\n\n  // Redirecionar se não estiver autenticado\n  useEffect(() => {\n    if (!isLoading && !isAuthenticated) {\n      router.push('/login');\n    }\n  }, [isAuthenticated, isLoading, router]);\n\n  if (isLoading) {\n    return (\n      <div className=\"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center\">\n        <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-orange-500\"></div>\n      </div>\n    );\n  }\n\n  if (!user) return null;\n\n  // Foto do usuário - se tiver photoUrl, usa a URL completa, senão mostra iniciais\n  const userPhoto = user.photoUrl ? getApiUrl(user.photoUrl) : null;\n  const userInitials = `${user.firstName?.charAt(0)}${user.lastName?.charAt(0)}`;\n  const showImage = userPhoto && !imageError;\n\n  const userInfo = [\n    { icon: FaUser, label: 'Nome Completo', value: `${user.firstName} ${user.lastName}` },\n    { icon: FaEnvelope, label: 'Email', value: user.email },\n    { icon: FaAddressCard, label: 'BI/Identificação', value: user.bi || 'Não informado' }\n  ];\n\n  const handleEditProfile = () => console.log('Abrir modal de edição');\n  const handleChangePassword = () => setIsChangePasswordModalOpen(true);\n  const handleDeleteAccount = () => console.log('Abrir modal de deleção');\n\n  return (\n    <>\n      <div className=\"min-h-screen bg-gray-50 dark:bg-gray-900 py-8\">\n        <div className=\"max-w-3xl mx-auto px-4\">\n          \n          <div className=\"text-center mb-8\">\n            <h1 className=\"text-3xl font-bold text-gray-900 dark:text-white mb-2\">Meu Perfil</h1>\n            <p className=\"text-gray-600 dark:text-gray-400\">Gerencie suas informações e configurações</p>\n          </div>\n\n          <div className=\"bg-white dark:bg-gray-800 rounded-xl shadow-lg overflow-hidden\">\n            \n            {/* Banner com Foto */}\n            <div className=\"h-32 bg-gradient-to-r from-orange-500 to-red-600 relative\">\n              <div className=\"absolute -bottom-12 left-6\">\n                <div className=\"relative\">\n                  <div className=\"w-24 h-24 bg-gradient-to-r from-orange-500 to-red-600 rounded-full border-4 border-white dark:border-gray-800 flex items-center justify-center text-white font-bold text-xl shadow-lg overflow-hidden\">\n                    {showImage ? (\n                      <img \n                        src={userPhoto}\n                        alt={`${user.firstName} ${user.lastName}`}\n                        className=\"w-full h-full rounded-full object-cover\"\n                        onError={() => setImageError(true)}\n                      />\n                    ) : (\n                      <span className=\"text-lg\">{userInitials}</span>\n                    )}\n                  </div>\n                  <div className=\"absolute bottom-1 right-1 w-6 h-6 bg-green-500 rounded-full border-2 border-white dark:border-gray-800\"></div>\n                </div>\n              </div>\n            </div>\n\n            {/* Conteúdo Principal */}\n            <div className=\"pt-16 px-6 pb-8\">\n              \n              <div className=\"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-8\">\n                <div className=\"text-center sm:text-left mb-4 sm:mb-0\">\n                  <h2 className=\"text-2xl font-bold text-gray-900 dark:text-white mb-2\">\n                    {user.firstName} {user.lastName}\n                  </h2>\n                  <div className=\"w-20 h-1 bg-gradient-to-r from-orange-500 to-red-600 rounded-full\"></div>\n                </div>\n                \n                <div className=\"flex flex-col sm:flex-row gap-2\">\n                  <button onClick={handleEditProfile} className=\"flex items-center justify-center space-x-2 px-4 py-2 bg-orange-500 text-white rounded-lg hover:bg-orange-600 transition-colors\">\n                    <FaEdit className=\"w-4 h-4\" />\n                    <span>Editar Perfil</span>\n                  </button>\n                  \n                  <button onClick={handleChangePassword} className=\"flex items-center justify-center space-x-2 px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors\">\n                    <FaKey className=\"w-4 h-4\" />\n                    <span>Alterar Senha</span>\n                  </button>\n                </div>\n              </div>\n\n              <div className=\"grid grid-cols-1 gap-4 mb-8\">\n                {userInfo.map((item, index) => {\n                  const IconComponent = item.icon;\n                  return (\n                    <div key={index} className=\"flex items-start space-x-4 p-4 bg-gray-50 dark:bg-gray-700 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-600 transition-colors group\">\n                      <div className=\"p-2 bg-white dark:bg-gray-600 rounded-lg shadow-sm group-hover:scale-110 transition-transform\">\n                        <IconComponent className=\"w-5 h-5 text-orange-500\" />\n                      </div>\n                      <div className=\"flex-1\">\n                        <p className=\"text-sm font-medium text-gray-600 dark:text-gray-400 mb-1\">{item.label}</p>\n                        <p className=\"font-semibold text-gray-900 dark:text-white\">{item.value}</p>\n                      </div>\n                    </div>\n                  );\n                })}\n              </div>\n\n              <div className=\"mt-8 pt-6 border-t border-red-200 dark:border-red-800\">\n                <div className=\"bg-red-50 dark:bg-red-900/20 rounded-lg p-4\">\n                  <h3 className=\"text-lg font-semibold text-red-800 dark:text-red-400 mb-2\">Zona Perigosa</h3>\n                  <p className=\"text-sm text-red-700 dark:text-red-300 mb-4\">\n                    Esta ação não pode ser desfeita. Todos os seus dados serão permanentemente removidos.\n                  </p>\n                  <button onClick={handleDeleteAccount} className=\"flex items-center justify-center space-x-2 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors\">\n                    <FaTrash className=\"w-4 h-4\" />\n                    <span>Excluir Minha Conta</span>\n                  </button>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Modal de Alteração de Senha */}\n      <ChangePasswordModal\n        isOpen={isChangePasswordModalOpen}\n        onClose={() => setIsChangePasswordModalOpen(false)}\n        userId={user.id}\n      />\n    </>\n  );\n}"],"names":[],"mappings":"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","debugId":null}}]
}